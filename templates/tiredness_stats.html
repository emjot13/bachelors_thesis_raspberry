<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Example Template</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
<!--    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->

              <script>
  function createChart() {
    var ctx = document.getElementById('myChart').getContext('2d');
    var chart = new Chart(ctx, {
      type: 'line',
      data: {{ chart_data|safe }},
      options: {
        scales: {
          yAxes: [{
            ticks: {
              beginAtZero: true
            }
          }]
        }
      }
    });
    window.addEventListener('load', createChart);
  }
</script>
  </head>
  <body>
    <h1>{{ message }}</h1>

<form>
  <label for="date-input">Select Start Date:</label>
  <input type="date" id="date-input" name="start_date">
  <label for="end-date-input">Select End Date:</label>
  <input type="date" id="end-date-input" name="end_date">
  <script>
    var startDateInput = document.getElementById("date-input");
    var endDateInput = document.getElementById("end-date-input");
    startDateInput.addEventListener("change", function() {
      var startValue = startDateInput.value;
      var endValue = endDateInput.value;
      // update chart data based on selectedValue
      var currentUrl = new URL(window.location.href);
      var searchParams = new URLSearchParams(currentUrl.search);
      searchParams.delete("start_date");
      searchParams.append("start_date", startValue);
      if (endValue) {
        searchParams.append("end_date", endValue);
      }
      currentUrl.search = searchParams.toString();
      window.location = currentUrl.toString();
    });
    endDateInput.addEventListener("change", function() {
      var startValue = startDateInput.value;
      var endValue = endDateInput.value;
      var currentUrl = new URL(window.location.href);
      var searchParams = new URLSearchParams(currentUrl.search);
      searchParams.delete("end_date");
      searchParams.append("end_date", endValue);
      if (startValue) {
        searchParams.append("start_date", startValue);
      }
      currentUrl.search = searchParams.toString();
      window.location = currentUrl.toString();
    });
  </script>
</form>


    <form>
  <label for="time-interval">Select Time Interval:</label>
  <select id="time-interval" name="time-interval">
    <option value="1">Choose</option>
    <option value="1">1 min</option>
    <option value="5">5 min</option>
    <option value="15">15 min</option>
    <option value="60">1 hour</option>
  </select>
<script>
  var select = document.getElementById("time-interval");
  select.addEventListener("change", function() {
      var selectedValue = select.value;
    var currentUrl = new URL(window.location.href);
    var searchParams = new URLSearchParams(currentUrl.search);
    searchParams.delete("time_interval");
    searchParams.append("time_interval", selectedValue);
    currentUrl.search = searchParams.toString();
    window.location = currentUrl.toString();
  });
</script>

</form>


    <ul>
<!--      {% for item in items %}-->
<!--      <li>Day: {{ item.day }}, <div>yawns: {{item.yawns}} times</div> <div>closed eyes for prolonged time: {{item.sleep}} times</div></li>-->
<!--      {% endfor %}-->
    </ul>

  <canvas id="myChart"></canvas>
  <script>
  window.addEventListener('load', createChart);
</script>
  </body>
</html>